### wp-greet ###

wp-greet ist ein WordPress-Plugin, mit dem eigene Grafiken und Fotos
als Grußkarten aus einem WordPress-Blog gesendet werden können.
wp-greet benötigt das Plugin NextGenGallery
(http://alexrabe.boelinger.com/wordpress-plugins/nextgen-gallery/) ab
Version 0.83 zum Verwalten der Grußkarten, sowie WordPress Version 2.2
oder höher. Getestet mit WordPress bis Version 2.5 und NextGen Gallery
bis Version 0.92.


Die Punkte 1. bis 4. dieser Anleitung setzen voraus, dass
NextGenGallery in der Version 0.83 oder höher bereits installiert ist.
Wer NextGen Gallery noch nicht installiert hat, findet unter Punkt 5
eine Kurzanleitung dazu.


1. Installation und Vorbereitungen:

Nach dem Download der zwei Dateien wp-greet.zip und PHPMailer_v2.0.0.zip
beide Verzeichnisse entpacken. Den Inhalt von  PHPMailer_v2.0.0 in das
Verzeichnis wp-greet/phpmailer kopieren. Die Datei wp-greet/phpmailer-conf.php
muss angepasst werden:
- bei    $wpg_smtpserver="localhost"
  statt "localhost" den jeweiligen SMTP-Servernamen eintragen (meist so etwas
  wie "smtp.deine-domain.de" oder nur "deine-domain.de")
- bei    // $wpg_smtpuser="babsi"
  und    // $wpg_smtppass="password"
  müssen, sofern der SMTP-Server eine Anmeldung verlangt, Username und Passwort
  angegeben werden. Diese Einstellungen sind providerabhängig. Wenn ein Eintrag
  notwendig ist, müssen auch die // am Zeilenanfang entfernt werden.

Anschließend alle Dateien auf den Webspace in das Verzeichnis /wp-plugins
hochladen. Die Datei nggfunctions.php aus dem Verzeichnis wp-greet/patches
in das Verzeicnnis /wp-plugins/nextgen-gallery kopieren. (Die Originaldatei
sollte vorher gesichert werden.)
In der Pluginverwaltung das Plugin wp-greet aktivieren.


2. Einstellungen:

Im WordPress-Adminbereich werden unter "Einstellungen/wp-greet" die gewünschten
Einstellungen vorgenommen:

- Unter "Mailreturn-Pfad" kann eine Emailadresse angegeben werden, an die
  Grußkarten, die nicht zugestellt werden konnten, zurückgeschickt werden.
- Unter "BCC-Kopie senden an" kann eine Emailadresse angegeben werden, an die eine
  Kopie jeder verschickten Grußkarte gesendet wird (Blogbetreiber, die sich eine
  Kopie an die eigene Emailadresse schicken lassen, sollten Ihre Leser bzw. die
  potentiellen Grußkarten-Verschicker auf diese Tatsache hinweisen).
- "Bild inline senden" wird aktiviert, wenn das Bild in der Mail und nicht als
  Anhang verschickt werden soll.
- Bei "Feste Bildbreite" sollte eine feste Breite für das Bild eingestellt
  werden, die nicht größer ist als die Breite des Inhaltsbereichs des Blogs. Wenn
  breitere Bilder hochgeladen werden, wird ihre Größe dann automatisch angepasst
  (wobei die Bilder möglichst nicht in wesentlich größerem Format hochgeladen
  werden sollten, da die Qualität durch die Verkleinerung sinkt).
- Durch Aktivierung von "Profilinformationen verwenden" wird die Emailadresse,
  die unter "Allgemeine Einstellungen" als Emailadresse hinterlegt ist, im
  Mailformular als Standard-Absenderadresse eingetragen.
- Wird "Logging aktivieren" markiert, werden Daten über die verschickten Karten
  in der Datenbank abgespeichert. Momentan lässt sich diese Statistik nur direkt
  in der Datenbank in der Tabelle wp_wpgreet_stats (bzw. statt "wp_" das eigene
  Präfix) einsehen. Eine Integration in den Adminbereich ist geplant.
- Unter "Mindest-Benutzerstatus zum Versenden einer Karte" wird ausgewählt, ob
  jeder Besucher Karten verschicken darf nur registrierte Blogbenutzer und
  welcher Benutzerstatus dazu notwendig ist.
- Unter "Standard Betreff" kann eine Standard-Betreffzeile angegeben werden, die
  vom Grußkarten-Verschicker wieder geändert werden kann.
- Unter "Standard Mail-Header" und "Standard Mail-Footer" kann Text
  eingegeben werden, der standardmäßig über und unter jeder Grußkarte erscheint.

Die Änderungen mit Klick auf "Update Options" abspeichern.


3. Benutzung:

a. In der Verwaltung von NextGenGallery eine neue Galerie für die Grußkarten
   anlegen und die Grafiken oder Fotos, die als Grußkarten verschickt werden
   sollen, in diese Galerie hochladen.

b. Eine statische Seite erstellen und als Inhalt lediglich "&nbsp;[wp-greet]"
   (ohne die Anführungszeichen - das &nbsp; ist notwendig, weil es sonst einen
   XHTML-Fehler gibt) einfügen. Als Seitentitel z.B. "greet" angeben.
   Anschließend die Seite veröffentlichen und aus der Seitenauflistung
   ausschließen. Das geht bei Nutzung von Widgets ganz einfach, indem die ID
   der Seite in der Widgetverwaltung bei "Ausschließen" eingetragen wird.
   Wer keine Widgets nutzt, sucht in seiner sidebar.php den Befehl
   <?php wp_list_pages(); ?> und ändert ihn so:
   <?php wp_list_pages('exclude=ID'); ?>, wobei "ID" durch die ID der soeben
   erstellten Seite ersetzt wird.

c. Eine weitere statische Seite erstellen, auf der die Galerie, die die zu
   verschickenden Grafiken enthält, aufgerufen wird. Hierzu wird auf der Seite
   eingefügt: [gallery=ID url=http://deine-domain.de/greet/], wobei "ID" ersetzt
   wird mit der ID der in Schritt a. erstellten Galerie und "deine-domain.de/greet/"
   mit dem Permalink der in Schritt b. erstellten Seite. Als Seitentitel für
   diese Seite z.B. "Grusskarten" angeben und die Seite veröffentlichen.

d. Im Blog die unter Punkt c. erstellte Seite, also
   "http://deine-domain.de/grusskarten/" aufrufen, wobei "deine-domain.de/grusskarten"
   natürlich wieder mit der eigenen URL ersetzt wird. Aus den Vorschaubildern
   das gewünschte per Klick auswählen. Daraufhin öffnet sich eine Seite mit dem
   Bild in Großansicht und den Textfeldern Absender, Empfänger, Betreff und
   Nachrichtentext. Nachdem diese ausgefüllt wurden, kann die Grußkarte per Klick
   auf "Vorschau" begutachtet werden und dann entweder durch Anklicken von
   "Zurück" geändert werden oder durch Anklicken von "Senden" abgeschickt werden.

e. Grußkarten können auch in einen Beitrag eingebunden werden. Hierzu wie in Punkt c.
   die Grußkartenseite durch [gallery=ID url=http://deine-domain.de/greet/] aufrufen
   - auch hier natürlich mit entsprechender Anpassung der ID und der URL.


4. Anpassung des Designs

Zur Anpassung des Designs der Grußkartenseite wird die Datei wp-greet.css
bearbeitet.

Bei schmalen Themes kann z.B. das Feld zum Eingeben des Nachrichtentextes verschmälert
werden durch Hinzufügen von
   .wp-greet-form textarea { width: 300px; }.

Um auf der Grußkartenseite den gleichen Rahmen um das Bild zu haben wie auf der
Übersichtsseite, wird dem stylesheet z.B. hinzugefügt
   .wp-greet-form img { border: 1px solid #a9a9a9; padding: 4px;}


5. Kurzanleitung zur Installation von NextGenGallery:

Das entpackte Verzeichnis nextgen-gallery in das Verzeichnis wp-plugins auf
den Webspace hochladen und das Plugin in der Pluginverwaltung aktivieren.
Es erscheint ein neuer Menüpunkt "Gallery". Hier kann beim Unterpunkt "Optionen"
der Verzeichnispfad geändert werden, unter dem die Grußkarten abgespeichert
werden sollen, wenn nicht der Standardpfad "wp-content/gallery" beibehalten
werden soll. Außerdem lässt sich unter "Thumbnails" die Thumbnailgröße, also
die Größe der Vorschau-Bilder, verändern.
Weitere Verwendungshinweise zu NextGen Gallery und Links zu Dokumentationen
finden sich auf der Plugin-Seite:
http://alexrabe.boelinger.com/wordpress-plugins/nextgen-gallery/.